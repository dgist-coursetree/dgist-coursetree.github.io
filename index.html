<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>DCTP: DGIST CourseTree Project</title>

<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
 
 </head>
 <body>

<style type="text/css">
.selbox1 {
}
.selbox1 select {
  width:250px;
}

.selbox1 select option {
  font-weight:600;
}

.selbox1 select option:disabled {
  font-weight:normal;
  color:#999;
}

.cbox {
  display:inline-block;
  width:250px;
}
.cbox select {
  width:240px;
}
</style>

<script>
  // 과목코드	과목명	학점	과목구분(0: 전공, 1:비전공)	공통필수여부	이학사	공학사	물리학	화학	생명과학	기계공학	재료공학	전자공학	컴퓨터공학	화학공학	개설학기
var ex_data=`CSE202	자료구조	3	0	F	0	0	0	0	0	0	2	3	0	T	T
CSE203	이산수학	3	0	F	1	0	0	0	0	0	2	3	0	T	T
CSE201	객체지향 프로그래밍	3	0	F	1	0	0	0	0	0	2	3	0	T	T
EE201	디지털 논리회로	3	0	F	1	0	0	0	0	0	2	3	0	F	T
EE301	신호 및 시스템	3	0	F	0	0	0	0	0	0	3	0	0	F	T
CSE305	컴퓨터구조	3	0	F	0	0	0	0	0	0	2	3	0	F	T
EE304	반도체물성개론	3	0	F	0	0	0	0	0	0	3	0	2	F	T
MECH309	자동제어시스템	3	0	F	0	0	0	0	3	0	2	0	0	F	T
EE302	전자소자개론	3	0	F	1	0	0	0	0	0	3	0	0	F	T
CSE304	운영체제	3	0	F	1	0	0	0	0	0	2	3	0	F	T
EE305	통신의기초	3	0	F	1	0	0	0	0	0	2	0	0	F	T
CSE303	딥러닝개론	3	0	F	1	0	0	0	0	0	2	2	0	F	T
MECH304	시스템의 통합적 모델링	3	0	F	1	0	0	0	2	0	2	0	0	F	T
EE404	반도체공정개론	3	0	F	0	0	0	0	0	0	2	0	0	F	T
EE401	디지털 신호처리	3	0	F	0	0	0	0	0	0	2	2	0	F	T
CSE306	시스템 프로그래밍	3	0	F	0	0	0	0	0	0	0	3	0	F	T
CSE302	기계학습개론	3	0	F	0	0	0	0	0	0	0	2	0	T	T
CSE301	컴퓨터 알고리즘	3	0	F	0	0	0	0	0	0	0	3	0	T	T
CSE404	컴퓨터 비전 개론	3	0	F	0	0	0	0	0	0	0	2	0	T	T
CHEM205	유기화학 I	3	0	F	0	0	3	0	0	2	0	0	3	T	T
CHEM201	분석화학	3	0	F	0	0	3	0	0	2	0	0	2	T	T
CHEM202	무기화학 I	3	0	F	1	0	3	0	0	2	0	0	3	T	T
CHEM203	물리화학 I	3	0	F	1	0	3	0	0	2	0	0	2	T	T
MECH202	유체역학	3	0	F	1	0	0	0	0	0	0	0	2	F	T
CHEM204	유기화학 II	3	0	F	1	0	3	0	0	0	0	0	2	T	T
CHEM306	물리화학 II	3	0	F	0	0	3	0	0	0	0	0	2	T	T
CE303	화학공학열역학	3	0	F	0	0	0	0	0	0	0	0	3	F	T
CE302	이동현상개론	3	0	F	0	0	0	0	0	0	0	0	3	F	T
CHEM305	무기화학 II	3	0	F	0	0	3	0	0	0	0	0	2	T	T
CE301	반응공학	3	0	F	1	0	0	0	0	0	0	0	3	F	T
CHEM303	유기화학 III	3	0	F	1	0	2	0	0	0	0	0	2	T	T
CHEM304	물리화학 III	3	0	F	1	0	2	0	0	0	0	0	2	T	T
MSE303	나노재료학	3	0	F	1	0	0	0	0	2	0	0	2	F	T
CE401	고분자개론	3	0	F	0	0	2	0	0	0	0	0	2	T	T
BS103	고전역학	3	1	T	0	0	0	0	0	0	0	0	0	F	F
BS104	고전역학 실험	1	1	F	0	0	0	0	0	0	0	0	0	F	F
BS118	일반화학 I	3	1	T	0	0	0	0	0	0	0	0	0	F	F
BS113	일반화학실험 I	1	1	T	1	0	0	0	0	0	0	0	0	F	F
BS114	생명과학개론	3	1	F	2	3	3	0	3	3	3	3	3	F	F
BS116	일반생물학 I	3	1	F	0	0	0	0	0	0	0	0	0	F	F
BS115	일반생물학실험	1	1	T	2	0	0	0	0	0	0	0	0	F	F
BS105	전자기학	3	1	F	1	3	0	0	1	1	3	0	1	F	F
BS106	전자기학실험	1	1	F	1	0	0	0	0	0	0	0	0	F	F
BS119	일반화학 II	3	1	F	1	0	3	1	0	3	0	0	3	F	F
BS117	일반생물학 II	3	1	F	1	0	0	3	0	0	0	0	0	F	F
BS102	응용 미적분학과 미분방정식	3	1	T	0	0	0	0	0	0	0	0	0	F	F
BS101	다변수 미적분학	3	1	T	1	0	0	0	0	0	0	0	0	F	F
BS203	선형대수학	3	1	F	0	2	0	0	2	0	2	3	0	F	F
BS202	확률과 통계 및 실습	3	1	F	2	1	0	0	0	0	2	2	0	F	F
BS201	복합공학수학	3	1	F	1	1	0	0	1	0	1	0	0	F	F
BE101	프로그래밍	3	1	T	1	0	0	0	0	0	0	0	0	F	F
BE202	데이터사이언스기초	3	1	T	0	0	0	0	0	0	0	0	0	F	F
BE201	인공지능기초	3	1	T	1	0	0	0	0	0	0	0	0	F	F
BE205	회로이론과 계측법	3	1	F	0	2	0	0	0	0	3	0	0	F	F
BE203	창의기계설계	3	1	F	0	0	0	0	3	0	0	0	0	F	F
BE204	화학공학개론	3	1	F	1	0	1	0	0	0	0	0	3	F	F
TP101	디자인사고	3	2	F	2	0	0	0	0	0	0	0	0	F	F
TP201	디자인 기획과 전략	3	2	F	1	0	0	0	0	0	0	0	0	F	F
TP308	생명에 대한 융합적 이해	3	2	F	0	0	0	0	0	0	0	0	0	F	F
TP305	게임이론	3	2	F	2	0	0	0	0	0	0	0	0	F	F
TP306	산업과 법	3	2	F	2	0	0	0	0	0	0	0	0	F	F
TP311	감성공학과 디자인	3	2	F	2	0	0	0	0	0	0	0	0	F	F`;
var a_subj=[
 //[0:고유번호 1:과목명, 2:형태1(0전공,1교양,2기타), 3:형태2(0필수,1선택,2기타)..]
 // 과목코드	과목명	학점	과목구분(0: 전공, 1:비전공)	공통필수여부	이학사	공학사	물리학	화학	생명과학	기계공학	재료공학	전자공학	컴퓨터공학	화학공학	개설학기
['CSE202','자료구조',0,0],
['CSE203','이산수학',0,0],
['CSE201','객체지향 프로그래밍',0,0],
 ['g1','전공1',0,0],
 ['g2','전공2',0,0],
 ['g3','전공3',0,0],
 ['g4','전공4',0,0],
 ['g41','전공5',0,0],
 ['g5','교양1',1,0],
 ['g6','교양2',1,0],
 ['g7','교양3',1,0],
 ['g8','교양4',1,0],
 ['g9','기타1',2,0],
 ['g10','기타2',2,0],
 ['g11','기타3',2,0],
 ['g12','기타4',2,0]
];

function stepOk(step) {
  var i, fe=document.forms['f1'].elements;
  
  if(step==1) {
    var c=0;
    for(i=1;i<9;i++) {
      if(fe['c1_'+i].checked) c++;
    }
    if(c<1) { alert("전공 트랙이 선택되지 않았습니다"); return false; }
    if(c>2) { alert("전공 트랙은 최대 2개까지만 선택하세요"); return false; }
    document.getElementById('step_2').style.display='';

  } else if(step==2) {
    var c=0;
    for(i=1;i<4;i++) {
      if(fe['c2_'+i].checked) c++;
    }
    if(c<1) { alert("수학과목이 선택되지 않았습니다"); return false; }

    c=0;
    for(i=1;i<4;i++) {
      if(fe['c3_'+i].checked) c++;
    }
    if(c<1) { alert("기초공학과목이 선택되지 않았습니다"); return false; }

    c=0;
    for (i=1;i<4;i++) {
      if(fe['c4_'+i].checked) c++;
    }
    if(c<2) { alert("1학년 2학기 기초과학은 2과목 이상 선택해야 합니다"); return false; }

    document.getElementById('step_3').style.display='block';
  }
}

function drawSubj() {
  var i, l=a_subj.length, a, s='', s1='', s2='', s3='', s4='', s5='', c1=0, c2=0, c3=0, c4=0, c5=0; //s1:전공필수 s2:전공선택 s3:비트랙, s4:비전공, s5:인문사회필수 c1,2,3,4,5:과목목록 갯수
  for(i=0;i<l;i++) {
    a=a_subj[i];
    s='<option value="'+a[0]+'">'+a[1]+'</option>';
    if(a[2]==0) { s1+=s; c1++; //전공필수
    } else if(a[2]==1) { s2+=s; c2++; //전공선택
    } else if(a[2]==2) { s3+=s; c3++;//비트랙
    } else if(a[2]==3) { s4+=s; c4++;//비전공
    } else if(a[2]==4) { s5+=s; c5++;//인문사회필수
    }
  }
  $('#requiredCourse').append(s1).attr('size',c1);
  $('#selectiveCourse').append(s2).attr('size',c2);
  $('#nonTrack').append(s3).attr('size',c3);
  $('#nonMajor').append(s4).attr('size',c4);
  $('#requiredHSS').append(s5).attr('size',c5);
}

function drawCbox1(n) {
  var s='';
  s+='<div class="cbox" id="cbox_'+n+'"><h4>'+Math.floor((n-1)/2+1)+'학년 '+((n%2==1)?1:2)+'학기 <button onclick="addSubj('+n+')">추가+</button><button onclick="delSubj('+n+')">삭제-</button></h4>';
  s+='<select name="cbox_'+n+'" size="10"></select>';
  s+='</div>';
  return s;
}

function drawCboxs() {
  var i, s='';
  for(i=1;i<9;i++) {
    s+=drawCbox1(i);
  }
  $('#cbox_a').append(s);
}

function addSubj(n) {
  var o=$('.selbox1 select option:selected');
  if(o==null || !o.val()) { alert('좌측 과목목록에서 과목을 선택하세요'); return false; }
 // alert('v:'+o.val()+' t:'+o.text());
  $('#cbox_'+n+' select').append('<option value="'+o.val()+'">'+o.text()+'</option>');
  o.attr("disabled","disabled").prop("selected",false);
}

function delSubj(n) {
  var o=$('#cbox_'+n+' select option:selected');
  $(".selbox1 select option[value='"+o.val()+"']").attr('disabled',false);
  o.remove();
}

function saveData() { 
  //쿠키로 데이타 저장..json 문자열로 저장
  //테스트로 수강과목만 저장
  var i, j, s='{';
  var os=$('.cbox'), l=os.length;
  for(i=0;i<l;i++) {
    //os[i].$('.cbox')
    var o=$('select',os[i]).children();//$(os[i],'option');
    s+='g'+(i+1)+':"';
    for(j=0;j<o.length;j++) {
      s+='|'+o[j].value;
    }
    s+='",';
  }
  s+='tmp:"" }';
  alert('s:'+s);// 3600*24
  document.cookie=encodeURIComponent('gdata')+'='+encodeURIComponent(s)+'max-age='+(60*60*24*365)+';path=/;';
  alert('ck:'+document.cookie);//
}

function getData() {
  var s=decodeURIComponent(document.cookie);
  //if(!s) return;
  //alert('s:'+s);
}

function cvtData() {
  // 과목코드	과목명	학점	과목구분(0: 전공, 1:비전공, 2: 비트랙, 3: 비전공, 4: 인문사회필수)	공통필수여부	이학사	공학사	물리학	화학	생명과학	기계공학	재료공학	전자공학	컴퓨터공학	화학공학	개설학기
  var i, a=ex_data.split("\n"), l=a.length, a1;
  a_subj=[];

  for(i=0;i<l;i++) {
    a1=a[i].split("\t");
    a_subj[i]=[a1[0], a1[1], a1[3], 0];   
  }
   
}

var sel_o=null; //마지막에 선택된 과목

$(function() {
 cvtData();
 drawSubj();
 drawCboxs();
 getData();//

 $(".selbox1 select").children().click(function(evt) {
    sel_o=this;
    $(".selbox1 select").children().prop("selected",false);
    $(sel_o).prop("selected",true);
    //if(sel_o!=this) sel_o.prop("selected",false); //기존 선택된 것이 있으면 선택을 풀어준다.
    //sel_o=this; 
 });
 
});

</script>


<h1>DGIST CourseTree Project</h1>
<h2>문의는 다음 연락처로 해주세요: prkhnyng@dgist.ac.kr (기초학부 박한영)</h2>
<h3 style='text-align:right'>Last Updated: 10/24, 2021</h3>
<form name="f1" onsubmit="return false">

<div id="step_1">
 <h3>전공 트랙 선택 (최대 2개)</h3>
  <input type="checkbox" name="c1_1"/>물리학 
  <input type="checkbox" name="c1_2"/>화학 
  <input type="checkbox" name="c1_3"/>생명과학 
  <input type="checkbox" name="c1_4"/>기계공학 
  <input type="checkbox" name="c1_5"/>재료공학 
  <input type="checkbox" name="c1_6"/>전자공학
  <input type="checkbox" name="c1_7"/>컴퓨터공학
  <input type="checkbox" name="c1_8"/>화학공학
 <hr/>
 <button onclick="stepOk(1)">다음단계 &gt;</button>
 <hr/>
</div><!--/step_1-->

<div id="step_2" style="display:none;">
 <h3>수학과목 선택(한개이상 선택)</h3> 
  <input type="checkbox" name="c2_1"/>선형대수학
  <input type="checkbox" name="c2_2"/>확통
  <input type="checkbox" name="c2_3"/>복합공합수학
  <br/>
 <h3>기초공학 선택(한개이상 선택)</h3>
  <input type="checkbox" name="c3_1"/>회로이론과 계측법
  <input type="checkbox" name="c3_2"/>창의기계설계
  <input type="checkbox" name="c3_3"/>화학공학개론
  <br/>
<h3>기초과학 선택(2개이상 선택)</h3> 
  <input type="checkbox" name="c4_1"/>전자기학
  <input type="checkbox" name="c4_2"/>일반화학 II
  <input type="checkbox" name="c4_3"/>일반생물학 II
  <br/>
 <hr/>
 <button onclick="stepOk(2)">다음단계 &gt;</button>
 <hr/>
</div><!--/step_2-->

<div id="step_3" style="display:none;">
 <h3>학기별 과목 담기</h3>
 <div style="font-size:12px;">
  과목담기: 좌측에서 과목 선택후 우측 원하는 학기에 [추가]버튼 클릭<br/>
  과목삭제: 원하는 학기의 과목을 선택후 [삭제]버튼 클릭
 </div>
 
 <table border="0" style="border-top:2px dotted #777;margin-top:8px;"><tr><td valign="top" style="vertical-align:top;border-right:2px dotted #777;padding:6px;">

 <div class="selbox1"><!--과목목록-->
  <h3>과목목록</h3>

  <h4>전공필수</h4>
  <select id="requiredCourse" name="sel_1" size="1"></select>  

  <h4>전공선택</h4>
  <select id="selectiveCourse" name="sel_2" size="1"></select>  

  <h4>비트랙</h4>
  <select id="nonTrack" name="sel_3" size="1"></select>  

  <h4>비전공 교과</h4>
  <select id="nonMajor" name="sel_4" size="1"></select>  

  <h4>기타</h4>
  <select id="requiredHSS" name="sel_5" size="1"></select>  

 </div>

 </td><td style="vertical-align:top;padding:6px;">

  <h3>학기별 수강과목</h3>
  <div id="cbox_a"></div>
 
 </td></tr></table>

 <button onclick="saveData()">저장</button>

</div><!--/step_3-->

</form>

 </body>
</html>
